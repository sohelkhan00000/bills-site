var deliveryInvoice=()=>{class s{constructor(){this["template-1"]=document.querySelector("delivery-invoice #template-1"),this["template-2"]=document.querySelector("delivery-invoice #template-2"),this.templates=document.querySelectorAll("delivery-invoice [name='templates']"),this.currency=document.querySelector("delivery-invoice [com-fm='currency']"),this.logo=document.querySelector("delivery-invoice [com-fm='logo']"),this.header=document.querySelector("delivery-invoice [com-fm='header']"),this["download-pdf"]=document.querySelector("delivery-invoice #download-pdf"),this["spinner-grow"]=document.querySelector("delivery-invoice .spinner-grow"),this["download-text"]=document.querySelector("delivery-invoice .download-text"),this["data-fm"]=document.querySelectorAll("delivery-invoice [data-fm]"),this["modal-btn"]=document.querySelector("delivery-invoice #modal-btn"),this["modal-template"]=document.querySelector("delivery-invoice #modal-template")}}let m={},u={},y={};new Date;let v,f,r="delivery-invoice-data.js";let h=!1,p=!1,S=!1;var a=e=>{m=new s;{var t;document.querySelectorAll(".com-wrapper").forEach(t=>{t.classList.contains("disable")&&(t.querySelector(".com-disable").checked=!0,t.attributes["com-fm"])&&document.querySelectorAll(`[com-tm='${t.attributes["com-fm"].value}']`).forEach(e=>{e.classList.add("d-none")}),t.querySelector(".com-disable").addEventListener("click",e=>{t.classList.toggle("disable"),t.attributes["com-fm"]&&document.querySelectorAll(`[com-tm='${t.attributes["com-fm"].value}']`).forEach(e=>{e.classList.toggle("d-none")})}),t.querySelector(".com-close").addEventListener("click",e=>{t.classList.toggle("close")}),t.querySelector(".com-clear")&&t.querySelector(".com-clear").addEventListener("click",e=>{1!=t.querySelector(".com-disable").checked&&(t.querySelectorAll('.com-body input[type="text"]').forEach(e=>{e.value=""}),t.querySelectorAll(".com-body textarea").forEach(e=>{elA.value=""}),t.querySelectorAll('.com-body input[type="file"]').forEach(e=>{elA.value=""}))})})}function r(e){""!=(d=e)?(0<(n=c.filter(e=>{return Object.keys(e).toString().toLowerCase().includes(d.toLowerCase())})).length&&(n.forEach((e,t,r)=>{e=`<button class="d-block" onclick="setCurrencyCall(${Object.values(e)})">${Object.keys(e)}</button>`;n[t]=e}),o.classList.remove("d-none")),n.length,0<n.length&&(o.innerHTML="",n.forEach((e,t)=>{o.innerHTML+=e}))):(o.classList.add("d-none"),n=[])}var a,c,o,l,d,n;if(m["download-pdf"].addEventListener("click",()=>{{var e=(e,t)=>{var r;e&&(m["spinner-grow"].style.display="inline-block",m["download-text"].innerHTML="PDF Generating...",e=v.cloneNode(!0),(r=document.createElement("div")).id="pdf-wrapper",r.setAttribute("class","pdf-wrapper"),r.appendChild(e),html2pdf().set({jsPDF:{format:"a4",orientation:"portrait"},html2canvas:{letterRendering:!0,useCORS:!0,logging:!0,scrollX:0,scrollY:0},margin:[0,0,0,0],padding:0,image:{type:"jpeg",quality:2}}).from(r).toPdf().save("Restaurant Bill "+server.pdfName).then(e=>{m["spinner-grow"].style.display="none",m["download-text"].innerHTML="Download"}).catch(e=>{console.log("PDF Error "+e)}))};let r=!0,a=document.getElementsByClassName("validation-message");Object.keys(a).some(function(e){var t;if("block"==a[e].style.display)return t="ErrorAdress"==a[e].id?130:80,t=a[e].getBoundingClientRect().top+window.pageYOffset-t,window.scrollTo({top:t,behavior:"smooth"}),r=!1,a[e].previousElementSibling.focus(),!0}),r?e(!0,"Template ready"):e(!1,"Template not ready")}}),a=document.querySelector('[data-fm="select-currency"]'),m.currency.querySelectorAll('[name="currency-type"').forEach(e=>{e.addEventListener("click",()=>{setCurrencyCall(a.selectedIndex)})}),c=[],a.querySelectorAll("option").forEach((e,t)=>{e={[e.innerHTML]:t};c[t]=e}),o=document.querySelector('[data-fm="search-currency-box"]'),l=document.querySelector('[data-fm="search-currency"]'),d="",n=[],window.addEventListener("click",function(e){e.target.attributes["data-fm"]&&("search-currency-box"==e.target.attributes["data-fm"].value||"search-currency"==e.target.attributes["data-fm"].value)||o.classList.add("d-none")}),l.addEventListener("keyup",e=>{r(l.value)}),l.addEventListener("focusin",e=>{r(l.value)}),(async(e,t)=>{dragScroller("delivery-invoice-template-wrapper"),y={templates:document.querySelectorAll("delivery-invoice .template-wrapper > .templates"),"modal-body":document.querySelector("delivery-invoice .modal-body")};for(let e in m){if(document.querySelector("delivery-invoice p[data-error="+e+"]"))u[e]=document.querySelector("delivery-invoice p[data-error="+e+"]");if(document.querySelector("[data-tm="+e+"]")&&e!="template-1"&&e!="template-2")y[e]=document.querySelectorAll("delivery-invoice  [data-tm="+e+"]");if(document.querySelector("[com-tm="+e+"]")&&e!="template-1"&&e!="template-2")y[e]=document.querySelectorAll("delivery-invoice  [com-tm="+e+"]");if(e=="template-1"||e=="template-2")y[e]=document.querySelector("delivery-invoice .template-wrapper > [data-tm="+e+"]")}if(v=y[e],y["templates"].forEach(e=>{e.classList.add("d-none")}),v.classList.remove("d-none"),m[e].checked=true,p);t(true,"page is ready!")})("template-1",(e,t)=>{}),m.templates.forEach(t=>t.addEventListener("click",e=>{m.templates.forEach(e=>{e.id!=t.id&&(y[t.id].classList.remove("d-none"),v=y[t.id],y[e.id].classList.add("d-none"))})})),h=h||!0,p&&!S){S=!0,m.tax&&(m.tax.querySelector('[data-fm="remove-tax"]').addEventListener("click",e=>{1==e.currentTarget.checked?(document.querySelectorAll(".tax-r").forEach(e=>{e.classList.add("d-none")}),document.querySelectorAll(".tax-n").forEach(e=>{e.innerHTML="Total: "})):(document.querySelectorAll(".tax-r").forEach(e=>{e.classList.remove("d-none")}),document.querySelectorAll(".tax-n").forEach(e=>{e.innerHTML="Sub Total: "}))}),m.tax.querySelector('[data-fm="tax-cgst-check"]').addEventListener("click",e=>{var t=document.querySelectorAll('[data-tm="tax-cgst-check"]');1!=m.tax.querySelector('[data-fm="remove-tax"]').checked&&(1==e.currentTarget.checked?t.forEach(e=>{e.classList.remove("d-none")}):t.forEach(e=>{e.classList.add("d-none")}),taxCal())}),m.tax.querySelector('[data-fm="tax-sgst-check"]').addEventListener("click",e=>{var t=document.querySelectorAll('[data-tm="tax-sgst-check"]');1!=m.tax.querySelector('[data-fm="remove-tax"]').checked&&(1==e.currentTarget.checked?t.forEach(e=>{e.classList.remove("d-none")}):t.forEach(e=>{e.classList.add("d-none")}),taxCal())}),m.gstno.querySelector('[data-fm="gstno-remove"]').addEventListener("click",e=>{var t=y.gstno;1==e.currentTarget.checked?t.forEach(e=>{e.classList.add("d-none")}):t.forEach(e=>{e.classList.remove("d-none")})}),m.gstno.querySelector('[data-fm="gstno-gst-check"]').addEventListener("click",e=>{var t=document.querySelectorAll('[data-tm="gstno-gst-check"]');1==e.currentTarget.checked?t.forEach(e=>{e.classList.remove("d-none")}):t.forEach(e=>{e.classList.add("d-none")})}),m.gstno.querySelector('[data-fm="gstno-fss-check"]').addEventListener("click",e=>{var t=document.querySelectorAll('[data-tm="gstno-fss-check"]');1==e.currentTarget.checked?t.forEach(e=>{e.classList.remove("d-none")}):t.forEach(e=>{e.classList.add("d-none")})})),q();{var i=void 0;let e=m["header"],t=y["header"];if(e.querySelector('[data-fm="h-1"]').value=t[0].querySelector('[data-tm="h-1"]').innerHTML,e.querySelector("#header-clear").addEventListener("click",e=>{t.forEach(e=>{e.querySelectorAll("[data-tm]").forEach(e=>{e.innerHTML=""})})}),E("header",2),i)i(true,"Header is called!")}m["modal-btn"].addEventListener("click",e=>{{y["modal-body"].innerHTML="";var t=v.cloneNode(!0);y["modal-body"].appendChild(t)}}),f=new bootstrap.Modal(m["modal-template"]),window.addEventListener("click",function(e){"modal-body"==e.target.classList[0]&&f.toggle()})}e&&e(!0,"Bind Event function called")},E=(a,e,t)=>{var r=m[a].querySelector("#add-item");let c=m[a].querySelector(".items-wrap"),o=1;1<e&&y[a].forEach(e=>{e.querySelectorAll(".item").forEach((e,t)=>{if(0!=t){let r=m[a].querySelector(".items-wrap > .item-1").cloneNode(!0);r.classList.remove("item-1"),r.classList.add("item-"+(t+1)),c.appendChild(r),r.querySelector(".item-remove").addEventListener("click",e=>{var t=document.querySelector(`[com-fm="${a}"] .items-wrap .`+r.className);t.parentNode.removeChild(t),document.querySelectorAll(`[com-tm="${a}"] .`+r.className).forEach(e=>{e.parentNode.removeChild(e)})}),document.querySelectorAll(`[com-fm="${a}"] .items-wrap .${r.className} [data-fm]`).forEach(t=>{["change","keyup"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll(`[com-tm="${a}"]  .${r.className} [data-tm="${t.attributes["data-fm"].value}"]`).forEach(e=>{e.innerHTML=t.value})})})}),o++,e.querySelectorAll("[data-tm]").forEach(e=>{m[a].querySelector(".items-wrap > .item-"+(t+1)).querySelector(`[data-fm="${e.attributes["data-tm"].value}"]`).value=e.innerHTML})}})}),r.addEventListener("click",e=>{o++;let r=m[a].querySelector(".items-wrap > .item-1").cloneNode(!0);r.classList.remove("item-1"),r.classList.add("item-"+o),r.querySelectorAll("[data-fm]").forEach(e=>{e.value=""}),c.appendChild(r),y[a].forEach((e,t)=>{e=e.querySelector(".item-1"),t=y[a][t],e=e.cloneNode(!0);e.classList.remove("item-1"),e.classList.add("item-"+o),e.querySelectorAll("[data-tm]").forEach(e=>{e.innerHTML=""}),t.appendChild(e)}),r.querySelector(".item-remove").addEventListener("click",e=>{var t=document.querySelector(`[com-fm="${a}"] .items-wrap .`+r.className);t.parentNode.removeChild(t),document.querySelectorAll(`[com-tm="${a}"] .`+r.className).forEach(e=>{e.parentNode.removeChild(e)})}),document.querySelectorAll(`[com-fm="${a}"] .items-wrap .${r.className} [data-fm]`).forEach(t=>{["change","keyup"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll(`[com-tm="${a}"]  .${r.className} [data-tm="${t.attributes["data-fm"].value}"]`).forEach(e=>{"item-price"==t.attributes["data-fm"].value?e.innerHTML=parseFloat(t.value).toFixed(2):e.innerHTML=t.value})})})})}),document.querySelectorAll(`[com-fm="${a}"] .items-wrap .item-1 [data-fm]`).forEach(t=>{["change","keyup"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll(`[com-tm="${a}"]  .item-1 [data-tm="${t.attributes["data-fm"].value}"]`).forEach(e=>{e.innerHTML=t.value})})})}),t&&t(!0,"items are ready")};var q=e=>{var t=m.logo;let a=y.logo,c=t.querySelector("[data-fm='logo-upload']"),o=t.querySelector("[data-fm='logo-url']");var r=t.querySelector("[data-x='logo-upload']"),t=t.querySelector("#logo-disable");let l;c.addEventListener("change",e=>{var t,r=c.files[0];r&&""==o.value&&((t=new FileReader).readAsDataURL(r),t.addEventListener("load",t=>{a.forEach(e=>{l=this.result||t.srcElement.result,e.src=l})}))}),o.addEventListener("keyup",e=>{const t=c.files[0];a.forEach(e=>{""!=o.value?e.src=o.value:t?e.src=l:e.src=server.imagePath+"/delivery-invoice/zomato.png"})}),r.addEventListener("click",e=>{""==o.value&&a.forEach(e=>{e.src=server.imagePath+"/delivery-invoice/zomato.png"}),c.value=""}),t.addEventListener("click",e=>{1==e.currentTarget.checked?a.forEach(e=>{e.classList.add("d-none")}):a.forEach(e=>{e.classList.remove("d-none")})}),e&&e(!0,"Logo has been setted!")};setCurrencyCall=t=>{var r,a=document.querySelector('[data-fm="currency-value"]'),e=document.querySelector('[data-fm="currency-remove"]'),c=document.querySelectorAll(".c-curr");e.checked||(a.selectedIndex=t,m.currency.querySelector('[data-fm="currency-code"]').checked?c.forEach(e=>{e.innerHTML=a.options[t].value}):(r=(r=(r=a.options[t].innerHTML).split("-").pop()).split(",",1).pop(),c.forEach(e=>{e.innerHTML=r})))};{var e=(e,t)=>{e&&(document.querySelectorAll("delivery-invoice [data-dynamic]").forEach(e=>{e=e.attributes["data-dynamic"].value;addDynamicHTML(e,deliveryInvoiceData[e],!1)}),p=!0,a((e,t)=>{}))},c=document.querySelectorAll("script");let t=!1;c.forEach(e=>{e.src.replace(/^.*[\\\/]/,"")==r&&(t=!0)}),t||((c=document.createElement("script")).src=server.jsPath+"/partialPage/"+r,c.async=!0,c.onload=()=>{e(!0,"Dynamic data loaded")},c.onerror=()=>{e(!1,"Error occurred while loading dynamic data")},document.body.appendChild(c))}};